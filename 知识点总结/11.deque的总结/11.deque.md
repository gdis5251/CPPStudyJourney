# deque

### 1. deque是什么？

1. deque(发音类似“deck”)，是双端队列不规则的首字母缩写，双端队列是动态大小的序列式容器，其可以像两端进行伸缩。
2. 特定的库可以以不同的方式实现deque，但通常都是一种动态数组。不论在何种情况下，它都允许通过随机访问迭代器直接访问单个元素，可以根据需要动态的伸缩。
3. 因此，deque提供了一些与vector相似的功能，但deque在头部和尾部进行数据插入和删除操作更加高效。与vector不同的是，deque不能保证所有的元素存储在连续的空间中，在deque中通过指针加偏移量方式访问元素可能会导致非法的操作。
4. vector与list提供了相似的接口，因此其具有类似的用途，但是内部的实现原理不同：vector使用使用了动态数组，该数组通常需要动态增长；deque中的元素可能分散在不同的存储块中，在deque中保存了
  一些必要的信息，通常用来在常数范围内直接访问deque中的任何一个元素，所以deque的内部实现比vector复杂，但是这些额外信息使得deque在某些情况下增长更加的高效，特别是在序列比较大，重新分
  配成本比较高的情况下。
5. 除了在频繁在头部或尾部进行插入和删除操作外，deque比list和forward_list的性能更差。

> [deque的详情解释](http://www.cplusplus.com/reference/deque/deque/?kw=deque )

### 2. 既然deque与vector相似，那为什么还要有这个容器呢？

**vector、list和deque对比：**

vector：

优点：可以随机访问。

缺点：在头插和头删的时候效率不高，并且当预设的空间用完时需要增容。

list：

优点：插入删除效率高。

缺点：不能随机访问，还会造成[内存碎片](https://baike.baidu.com/item/%E5%86%85%E5%AD%98%E7%A2%8E%E7%89%87/3883950 )。

> 所以deque就是vector和list比较折中的方法。

deque：物理不连续，逻辑连续的vector。

优点：随机访问、插入删除效率高、无较大增容代价。

实现方法：中控+缓冲的方式。

中控：指针数组。

**双端队列（deque）的底层是一段假象的连续空间，实际是分段连续的，为了维护其“整体连续”的假象，落在了deque的迭代器身上。**



